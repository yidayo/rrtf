<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Author" contect="http://www.webqin.net">
	<title>忘记密码</title>
	<link rel="shortcut icon"
		href="../forget-password/images/favicon.ico" />
	<link type="text/css" href="../forget-password/css/css.css"
		rel="stylesheet" />
	<script type="text/javascript"
		src="../forget-password/js/jquery-1.8.3-min.js"></script>
</head>

<body>

	<div class="content">
		<div class="web-width">
			<div class="doc1180">
				<div class="header">
					<div class="logo">
						<img src="../forget-password/i/logo.png"> <label
							class="titles">找回密码</label> <img class="icon"
							src="../forget-password/i/logo.png">
					</div>
				</div>
			</div>
			<hr />
			<div class="for-liucheng">
				<div class="liulist for-cur"></div>
				<div class="liulist for-cur"></div>
				<div class="liulist for-cur"></div>
				<div class="liulist"></div>
				<div class="liutextbox">
					<div class="liutext for-cur">
						<em>1</em><br /> <strong>填写账户名</strong>
					</div>
					<div class="liutext for-cur">
						<em>2</em><br /> <strong>验证身份</strong>
					</div>
					<div class="liutext for-cur">
						<em>3</em><br /> <strong>设置新密码</strong>
					</div>
					<div class="liutext">
						<em>4</em><br /> <strong>完成</strong>
					</div>
				</div>
			</div>
			<!--for-liucheng/-->
			<form action="../forget-password/forgetPwd4.html" method="get"
				class="forget-pwd" onSubmit="return checkPassword1()">
				<dl>
					<dt></dt>
					<dd class="tipname"></dd>
					<div class="clears"></div>
				</dl>
				<dl>
					<dt>新密码：</dt>
					<dd>
						<input type="text" name="password" id="password"
							onblur="blurPassword()" onfocus="fade1()" placeholder="请输入密码" />
					</dd>
					<div class="clears"></div>
				</dl>
				<dl>
					<dt>确认密码：</dt>
					<dd>
						<input type="text" name="repassword" id="repassword"
							onblur="blurRepassword()" onfocus="fade()" placeholder="请再次输入密码" />
					</dd>
					<div class="clears"></div>
				</dl>
				<div class="subtijiao">
					<a href="../forget-password/forgetPwd4.html" class="userCenter_save"  onclick="return checkPassword()">提交</a>
				</div>
			</form>
			<!--forget-pwd/-->
		</div>
		<iframe src="../forget-password/footer.html"
			style="width: 99vw; height: 32vh;" frameborder="no"></iframe>
		<!--web-width/-->
	</div>
	<!--content/-->
	<script type="text/javascript">
		var pass;

		function fade1() {
			$(".tipname").removeClass("passTip");
			$(".tipname").addClass("tippass");
			$(".tipname").text("提示：密码由中英文数字以及下划线等字符，字符长度8-20字符。");
		}
		function fade() {
			$(".tipname").text("");
		}

		function blurPassword() {
			var password = $("#password").val();
			pass = password;
			var pattern = /^[\w+&@#$%*~]{8,20}$/;
			if (password.length == 0) {
				$(".tipname").removeClass("tippass");
				$(".tipname").addClass("passTip");
				$(".tipname").text("提示：密码不能为空");
			} else if (!pattern.test(password)) {
				$(".tipname").removeClass("tippass");
				$(".tipname").addClass("passTip");
				$(".tipname").text("提示：密码不合规范");
			}
		}

		function blurRepassword() {
			var repassword = $("#repassword").val();
			if (repassword != pass || repassword.length == 0) {
				$(".tipname").removeClass("tippass");
				$(".tipname").addClass("passTip");
				$(".tipname").text("提示：两次输入的密码不一致");
				return false;
			} else {
				$.post("/password/update",{"password":repassword})
				return true;
			}
		}
		
		function checkPassword(){
			return blurRepassword();
		}
	</script>

</body>
</html>
